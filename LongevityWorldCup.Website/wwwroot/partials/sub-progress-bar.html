<meta charset="UTF-8">
<title>Sub Progress Bar</title>
<style>
    .sub-progress-container {
        width: 100%;
        max-width: none;
        margin: 8px 0 24px 0;
        padding: 12px 16px 8px;
        position: relative;
        background: rgba(0, 188, 212, 0.05);
        border-radius: 12px;
        box-sizing: border-box;
    }

    /* Single track: bar and dots share height and are vertically centered together */
    .sub-progress-container .sub-progress-track {
        position: relative;
        height: 5px;
        display: flex;
        align-items: center;
    }

        .sub-progress-container .progress-bar {
            position: absolute;
            left: 0;
            right: 0;
            top: 50%;
            transform: translateY(-50%);
            height: 4px;
            background: #e0e0e0;
            border-radius: 3px;
            z-index: 1;
        }

        .sub-progress-container .progress-fill {
            height: 100%;
            width: 0;
            background: var(--primary-color);
            transition: width 1.5s ease-in-out;
            position: relative;
            border-radius: 3px;
        }

        .sub-progress-container .stages {
            position: relative;
            z-index: 2;
            width: 100%;
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 4px;
        }

        .sub-progress-container .stage {
            min-width: 0;
            flex: 0 1 auto;
            display: flex;
            align-items: center;
        }

        .sub-progress-container .stage-dot {
            width: 22px;
            height: 22px;
            background: #e0e0e0;
            border-radius: 50%;
            margin: 0 auto;
            position: relative;
            color: #666;
            font-size: 11px;
            font-weight: 600;
            display: flex;
            align-items: center;
            justify-content: center;
            text-shadow: none;
            border: none;
        }

        .sub-progress-container .stage.completed .stage-dot {
            background: var(--primary-color);
            color: var(--light-text-color);
        }

        .sub-progress-container .stage.active .stage-dot {
            background: var(--secondary-color);
            color: var(--light-text-color);
            box-shadow: 0 0 0 2px rgba(255, 255, 255, 0.9);
        }
</style>
<div id="subProgressContainerItem" class="sub-progress-container">
    <div class="sub-progress-track">
        <div class="progress-bar">
            <div class="progress-fill" id="subProgressFill"></div>
        </div>
        <div class="stages">
        <div class="stage" id="subStage1">
            <div class="stage-dot">1</div>
        </div>
        <div class="stage" id="subStage2">
            <div class="stage-dot">2</div>
        </div>
        <div class="stage" id="subStage3">
            <div class="stage-dot">3</div>
        </div>
        <div class="stage" id="subStage4">
            <div class="stage-dot">4</div>
        </div>
        <div class="stage" id="subStage5">
            <div class="stage-dot">5</div>
        </div>
        </div>
    </div>
</div>

<script>
    // Function to update sub progress bar based on the current sub-stage
    function updateSubProgress(currentSubStage) {
        const subProgressFill = document.getElementById('subProgressFill');
        const subStages = document.querySelectorAll('.sub-progress-container .stage');

        // Update sub-progress stages
        subStages.forEach((s, index) => {
            if (index < currentSubStage - 1) {
                s.className = 'stage completed';
            } else if (index === currentSubStage - 1) {
                s.className = 'stage active';
            } else {
                s.className = 'stage';
            }
        });

        // Update sub-progress bar fill
        const subProgressPercentage = ((currentSubStage - 1) / (subStages.length - 1)) * 100;
        subProgressFill.style.width = `${subProgressPercentage}%`;

        const subProgressContainerItem = document.getElementById('subProgressContainerItem');
        if (currentSubStage == 99) {
            subProgressContainerItem.style.display = 'none';
        }
        else {
            subProgressContainerItem.style.display = 'block';
        }
    }

    // Example usage:
    // updateSubProgress(3);
</script>