<!DOCTYPE html>
<html lang="en">
<head>
    <title>Longevity World Cup - Menu</title>
    <!--HEAD-->
    <style>
        /* Hide the join-game button in the header */
        .join-game {
            display: none;
        }

        .img-crop {
            height: clamp(240px, 60vh, 720px);
            overflow: hidden;
            display: inline-block; /* keeps same width as before */
        }

            .img-crop .illustration {
                width: 100%; /* same width behavior */
                height: auto;
                display: block;
                position: relative;
                top: 50%;
                transform: translateY(-50%); /* equal crop top/bottom */
            }
    </style>
</head>
<body>
    <!--HEADER-->
    <main>
        <h1 class="visually-hidden">Game menu</h1>
        <div style="text-align: center;" data-aos="fade" data-aos-duration="700" data-aos-delay="300">
            <div class="img-crop">
                <img src="../assets/content-images/JustTrackIt.jpg"
                     alt="Illustration encouraging athletes to track their progress"
                     class="illustration"
                     loading="lazy">
            </div>
        </div>

        <div class="options-container" data-aos="fade" data-aos-duration="700" data-aos-delay="400">
            <button id="newGameBtn" class="option-button grey" onclick="window.location.href='/join'">
                Start competing
            </button>
            <button id="continueGameBtn" class="option-button grey" style="margin-bottom: 0px;" onclick="window.location.href='/select-athlete'">
                Athlete dashboard
            </button>
        </div>
    </main>
    <!--FOOTER-->
</body>
</html>

<script>
    document.addEventListener('DOMContentLoaded', function () {
        setTimeout(() => {
            const viewTarget = document.querySelector('h1');
            viewTarget.scrollIntoView({ behavior: 'smooth', block: 'start' });
        }, 500);

        // now mark the menu based on whether they've applied:
        const hasApp = localStorage.getItem('hasApplication') === 'true';
        const container = document.querySelector('.options-container');
        const newBtn = document.getElementById('newGameBtn');
        const contBtn = document.getElementById('continueGameBtn');

        if (hasApp) {
            contBtn.classList.remove('grey');
            contBtn.classList.add('green');
            container.insertBefore(contBtn, container.firstChild);
        } else {
            newBtn.classList.remove('grey');
            newBtn.classList.add('green');
            container.insertBefore(newBtn, container.firstChild);
        }
    });
</script>